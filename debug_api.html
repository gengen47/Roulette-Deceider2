<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Vercel API Test</title>
</head>

<body>
    <h1>Vercel API Test</h1>
    <div id="status">Testing...</div>
    <div id="output"></div>

    <script>
        async function runTest() {
            try {
                const params = new URLSearchParams({
                    keyword: 'ハッピースマイル和', // Correct store name
                    large_service_area: 'SS20', // Kansai area
                    count: 10
                    // lat/lng/range removed
                });

                document.getElementById('status').innerText = 'Fetching /api/shops...';

                const response = await fetch(`/api/shops?${params}`);
                if (!response.ok) {
                    throw new Error(`API responded with status: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                document.getElementById('status').innerText = 'Success! ' + (data.results?.shop?.length || 0) + ' shops found.';
                document.getElementById('output').innerText = JSON.stringify(data, null, 2);
            } catch (e) {
                document.getElementById('status').innerText = 'Failed: ' + e.message;
                console.error(e);
            }
        }

        runTest();
    </script>
</body>

</html>