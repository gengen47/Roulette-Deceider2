<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>Vercel API Test</title>
</head>

<body>
    <h1>Vercel API Test</h1>
    <div id="status">Testing...</div>
    <div id="output"></div>

    <script>
        async function runTest() {
            try {
                const params = new URLSearchParams({
                    id: 'J004509478', // Happy Smile Nagomi
                    middle_area: 'Y356',
                    lat: 34.79178, // Senrioka general
                    lng: 135.5487, // Senrioka general
                    range: 5,
                    count: 30
                });

                document.getElementById('status').innerText = 'Fetching /api/shops...';

                const response = await fetch(`/api/shops?${params}`);
                if (!response.ok) {
                    throw new Error(`API responded with status: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                document.getElementById('status').innerText = 'Success! ' + (data.results?.shop?.length || 0) + ' shops found.';
                document.getElementById('output').innerText = JSON.stringify(data, null, 2);
            } catch (e) {
                document.getElementById('status').innerText = 'Failed: ' + e.message;
                console.error(e);
            }
        }

        runTest();
    </script>
</body>

</html>